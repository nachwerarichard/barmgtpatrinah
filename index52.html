
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BMS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
      <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    /* Keep your section visibility rules */
    .section { display: none; }
    .section.active { display: block; }

    /* Table helpers */
    .table-responsive { overflow-x: auto; }
    table th, table td { text-align: left; padding: 12px 24px; white-space: nowrap; }

    /* Hide scrollbars for the main areas */
    #main-content, #sidebar { -ms-overflow-style: none; scrollbar-width: none; }
    #main-content::-webkit-scrollbar, #sidebar::-webkit-scrollbar { display: none; }



    /* Sidebar tilt design - diagonal background while keeping text horizontal */
.tilt-btn {
  position: relative;
  overflow: hidden;
  z-index: 0;
}
.tilt-btn::before {
  content: "";
  position: absolute;
  inset: 0;
  /* create a diagonal panel */
  transform-origin: left;
  background: linear-gradient(90deg, rgba(16,185,129,0.12), rgba(16,185,129,0.18));
  z-index: -1;
  transition: transform .25s ease, opacity .25s ease;
  opacity: 0.95;
}
/* stronger background when active */
.tilt-btn.active::before {
  background: linear-gradient(90deg, rgba(16,185,129,0.95), rgba(6,182,129,0.95));
}

/* keep inner text / icon horizontal by counter-skewing */
.tilt-content {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;
  /* REMOVED: width: 100%; */
  justify-content: flex-start;
}
    

    /* submenu visibility */
    .submenu { display: none; }
    .submenu.open { display: block; }

    /* small visual for subsection active */
    .sub-item.active {
      background-color: rgba(16,185,129,0.12);
      font-weight: 700;
      color: #065f46;
    }

    /* ensure submenu list items align */
    .sidebar-sublist button { padding-left: 1.75rem; }

    /* responsive tweaks */
    @media (max-width: 1024px) {
      #sidebar { position: absolute; z-index: 40; }
    }


    @keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
.animate-fadeIn {
  animation: fadeIn 0.25s ease-out;
}


    /* Add this to your main CSS file (or within <style> tags) */
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.animate-spin-custom {
    animation: spin 1s linear infinite;
    /* Optional: For a more 'dotted' look, you can use a custom border-radius/box-shadow trick,
       but the standard 'spinner' border is often used to represent the MS look.
       If you want the literal 'dotted circle', you'd need more complex CSS or an SVG.
       The border-top method above is the standard, simple implementation. */
}

     /* Custom scrollbar for a nicer look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1f2937; /* bg-gray-800 */ }
        ::-webkit-scrollbar-thumb { background: #4b5563; /* bg-gray-600 */ border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; /* bg-gray-500 */ }
        
        /* Ensures the charts adapt cleanly */
        .chart-container { height: 350px; width: 100%; }

  </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="preloader" class="fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-75 hidden">
        <div class="relative w-12 h-12">
            <div class="w-12 h-12 border-4 border-t-4 border-transparent border-t-emerald-600 rounded-full animate-spin-custom"></div>
        </div>
    </div>
    <div id="login-section" class="flex flex-col items-center justify-center h-screen bg-gray-100">
        <img src="patrinah.png" alt="Patrinah Hotel Logo" class="w-24 h-24 mb-6 rounded-full shadow-lg">
        <h2 class="text-3xl font-bold mb-4 text-gray-800">Login</h2>
        <input type="text" id="username" placeholder="Username" class="mb-4 p-3 border border-gray-300 rounded-lg w-80 focus:ring-emerald-500 focus:border-emerald-500 transition duration-150">
        <input type="password" id="password" placeholder="Password" class="mb-6 p-3 border border-gray-300 rounded-lg w-80 focus:ring-emerald-500 focus:border-emerald-500 transition duration-150">
        <button type="submit" onclick="login()" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-3 px-6 rounded-lg w-80 transition duration-300 shadow-md">Login</button>
        <p id="login-message" class="mt-4 text-red-500 font-medium"></p>
    </div>
 

  <!-- APP -->
  <div id="main-container" class="hidden h-screen overflow-hidden">

    

<!-- Message Modal -->
<div id="message-modal"
     class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-300">
  <div
    class="bg-white dark:bg-gray-900 dark:text-gray-100 rounded-2xl shadow-2xl w-11/12 max-w-md p-6 mx-4 sm:mx-0 animate-fadeIn transform transition-all">
    
    <!-- Modal Header -->
    <h2 class="text-xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4">
      Message
    </h2>

    <!-- Modal Body -->
    <p id="message-text" class="text-center text-gray-700 dark:text-gray-300 mb-6 leading-relaxed"></p>

    <!-- Modal Footer -->
    <div class="flex justify-center">
      <button id="message-close-button"
              class="px-5 py-2.5 bg-blue-600 text-white font-medium rounded-lg shadow hover:bg-blue-700 active:scale-95 transition-transform">
        OK
      </button>
    </div>
  </div>
</div>

    
     <header class="bg-white shadow-lg p-4 flex justify-between items-center sticky top-0 z-50 border-b border-emerald-100">
    <div class="flex items-center space-x-3">
        <img src="patrina.png" alt="Patrinah Hotel Logo" class="w-10 h-10 object-contain">
        <h1 class="text-xl font-extrabold text-emerald-700 tracking-wider hidden sm:block">BMS</h1>
    </div>

    <div class="flex items-center space-x-4">
        
        <div class="flex items-center space-x-2 p-2 rounded-full hover:bg-emerald-50 transition duration-150 cursor-pointer">
            
            <span id="current-user-display" class="username-display text-sm font-semibold text-gray-700 **inline-block**">
            </span>
            <img id="user-profile-pic" 
                 src="user.png" 
                 alt="User Profile" 
                 class="w-8 h-8 rounded-full object-cover border border-gray-300">

        </div>

      <button id="menu-toggle-open" class="text-gray-600 hover:text-emerald-600 text-xl p-2 rounded-full hover:bg-gray-100 transition duration-150 lg:hidden">
            <i class="fas fa-bars"></i>
        </button>

       
        
    </div>
</header>

   <div id="delete-confirmation-modal"
     class="**hidden fixed inset-0 z-5000** flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-300">
    
    <div class="**bg-white dark:bg-gray-900 dark:text-gray-100 rounded-2xl shadow-2xl w-11/12 max-w-md p-6 mx-4 sm:mx-0 animate-fadeIn transform transition-all**">
        
        <h3 class="**text-xl font-semibold text-center text-gray-800 dark:text-gray-100 mb-4**">
            Confirm Deletion
        </h3>
        
        <p class="**text-center text-gray-700 dark:text-gray-300 mb-6 leading-relaxed**">
            Are you sure you want to delete this inventory item? This action cannot be undone.
        </p>
        
        <div class="**flex justify-center space-x-3**">
            
            <button id="cancel-delete-btn"
                class="**px-5 py-2.5 bg-gray-300 dark:bg-gray-700 text-gray-800 dark:text-gray-100 font-medium rounded-lg shadow hover:bg-gray-400 active:scale-95 transition-transform**">
                Cancel
            </button>
            
            <button id="confirm-delete-btn"
                class="**px-5 py-2.5 bg-red-600 text-white font-medium rounded-lg shadow hover:bg-red-700 active:scale-95 transition-transform**">
                Delete
            </button>
        </div>
    </div>
</div>
    
    <div class="flex flex-1 h-[calc(100vh-64px)]">
      <!-- SIDEBAR -->

      <nav id="sidebar" class="w-64 bg-gray-800 text-white flex-shrink-0 overflow-y-auto transition-transform duration-300 transform -translate-x-full lg:translate-x-0 absolute lg:relative h-full z-20 shadow-xl">
         <!-- Mobile Close Button -->
<div class="lg:hidden flex justify-end p-2">
  <button id="close-sidebar"
          class="text-white bg-gray-700 hover:bg-gray-600 p-2 rounded-md focus:outline-none transition">
    <i class="fas fa-times text-xl"></i>
  </button>
</div>

    <div class="p-4 mb-16"> <div class="mb-4 text-center font-bold text-lg">BMS</div>

              <div class="mb-1">
            <button id="nav-dashboard" class="tilt-btn nav-main w-full text-left p-3 rounded-lg hover:bg-gray-700 flex items-center justify-between" onclick="showSubSection('dashboard','nav-dashboard')">
                <span class="tilt-content flex items-center">
                    <span class="ml-3">Dashboard</span>
                </span>
            </button>
        </div>


       

        <div class="mb-1">
            <button id="nav-inventory" class="tilt-btn nav-main w-full text-left p-3 rounded-lg hover:bg-gray-700 flex items-center justify-between" data-target="inventory-submenu" onclick="toggleSubmenu('inventory-submenu','nav-inventory')">
                <span class="tilt-content flex items-center">
                    <span class="ml-3">Inventory</span>
                </span>
                <i class="fas fa-chevron-down arrow-icon"></i> 
            </button>
            <ul id="inventory-submenu" class="sidebar-sublist submenu mt-2 rounded-lg bg-gray-900 p-1">
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="inventory-add" onclick="showSubSection('inventory-add','nav-inventory')">Add Inventory</button></li>
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="inventory-records" onclick="showSubSection('inventory-records','nav-inventory')">Inventory Records</button></li>
            </ul>
        </div>

        <div class="mb-1">
            <button id="nav-sales" class="tilt-btn nav-main w-full text-left p-3 rounded-lg hover:bg-gray-700 flex items-center justify-between" data-target="sales-submenu" onclick="toggleSubmenu('sales-submenu','nav-sales')">
                <span class="tilt-content flex items-center">
                    <span class="ml-3">Sales</span>
                </span>
                <i class="fas fa-chevron-down arrow-icon"></i>
            </button>
            <ul id="sales-submenu" class="sidebar-sublist submenu mt-2 rounded-lg bg-gray-900 p-1">
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="sales-new" onclick="showSubSection('sales-new','nav-sales')">Record New Sale</button></li>
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="sales-records" onclick="showSubSection('sales-records','nav-sales')">Sales Records</button></li>
            </ul>
        </div>

        <div class="mb-1">
            <button id="nav-expenses" class="tilt-btn nav-main w-full text-left p-3 rounded-lg hover:bg-gray-700 flex items-center justify-between" data-target="expenses-submenu" onclick="toggleSubmenu('expenses-submenu','nav-expenses')">
                <span class="tilt-content flex items-center">
                    <span class="ml-3">Expenses</span>
                </span>
                <i class="fas fa-chevron-down arrow-icon"></i>
            </button>
            <ul id="expenses-submenu" class="sidebar-sublist submenu mt-2 rounded-lg bg-gray-900 p-1">
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="expenses-add" onclick="showSubSection('expenses-add','nav-expenses')">Record New Expense</button></li>
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="expenses-records" onclick="showSubSection('expenses-records','nav-expenses')">Expense Records</button></li>
            </ul>
        </div>

        <div class="mb-1">
            <button id="nav-cash-management" class="tilt-btn nav-main w-full text-left p-3 rounded-lg hover:bg-gray-700 flex items-center justify-between" data-target="cash-submenu" onclick="toggleSubmenu('cash-submenu','nav-cash-management')">
                <span class="tilt-content flex items-center">
                    <span class="ml-3">Cash Management</span>
                </span>
                <i class="fas fa-chevron-down arrow-icon"></i>
            </button>
            <ul id="cash-submenu" class="sidebar-sublist submenu mt-2 rounded-lg bg-gray-900 p-1">
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="cash-record" onclick="showSubSection('cash-record','nav-cash-management')">Record Cash Movement</button></li>
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="cash-records" onclick="showSubSection('cash-records','nav-cash-management')">Cash Records</button></li>
            </ul>
        </div>

        <div class="mb-1">
            <button id="nav-reports" class="tilt-btn nav-main w-full text-left p-3 rounded-lg hover:bg-gray-700 flex items-center justify-between" data-target="reports-submenu" onclick="toggleSubmenu('reports-submenu','nav-reports')">
                <span class="tilt-content flex items-center">
                    <span class="ml-3">Reports</span>
                </span>
                <i class="fas fa-chevron-down arrow-icon"></i>
            </button>
            <ul id="reports-submenu" class="sidebar-sublist submenu mt-2 rounded-lg bg-gray-900 p-1">
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="reports-department" onclick="showSubSection('reports-department','nav-reports')">Department Totals</button></li>
                <li><button class="sub-item block w-full text-left p-3 rounded-md hover:bg-gray-800" data-show="reports-overall" onclick="showSubSection('reports-overall','nav-reports')">Overall Summary</button></li>
            </ul>
        </div>

        <div class="mb-1">
            <button id="nav-ai" class="tilt-btn nav-main w-full text-left p-3 rounded-lg hover:bg-gray-700 flex items-center justify-between" onclick="showSubSection('ai','nav-ai')">
                <span class="tilt-content flex items-center">
                    <span class="ml-3">AI</span>
                </span>
            </button>
        </div>
      
        <div class="mb-1">
            <button id="nav-audit-logs" class="tilt-btn nav-main w-full text-left p-3 rounded-lg hover:bg-gray-700 flex items-center justify-between" onclick="showSubSection('audit-logs','nav-audit-logs')">
                <span class="tilt-content flex items-center">
                    <span class="ml-3">Audit Logs</span>
                </span>
            </button>
        </div>
    </div>
    
    <div class="absolute bottom-0 left-0 right-0 p-4 bg-gray-800">
        <button id="logout-button" onclick="logout()" class="w-full bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-lg transition duration-300 flex items-center justify-center space-x-2">
            <span>Logout</span>
            <i class="fas fa-sign-out-alt"></i>
        </button>
    </div>
    
</nav>

      <!-- MAIN CONTENT -->
      <main id="main-content" class="flex-1 p-6 overflow-y-auto">

        <!-- INVENTORY - split into two sub sections -->
        <section id="inventory-add" class="section bg-white p-6 rounded-xl shadow-lg mb-6 section-content">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Inventory </h2>
          <h3 class="text-xl font-medium mb-3 border-b pb-2">Add Inventory Item</h3>
          <form id="inventory-form" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 p-4 border rounded-lg bg-gray-50">
            <input type="hidden" id="inventory-id">
            <div>
              <label for="item" class="block text-sm font-medium text-gray-700">Item:</label>
              <input type="text" id="item" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
            </div>
            <div>
              <label for="opening" class="block text-sm font-medium text-gray-700">Opening Stock:</label>
              <input type="number" id="opening" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
            </div>
            <div>
              <label for="purchases" class="block text-sm font-medium text-gray-700">Purchases:</label>
              <input type="number" id="purchases" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
            </div>
            <div>
              <label for="inventory-sales" class="block text-sm font-medium text-gray-700">Sales :</label>
              <input type="number" id="inventory-sales" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
            </div>
            <div>
              <label for="spoilage" class="block text-sm font-medium text-gray-700">Spoilage:</label>
              <input type="number" id="spoilage" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500">
            </div>
            <div class="md:col-span-2 flex justify-end pt-4">
              <button type="submit" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-300 flex items-center space-x-2">
  <i class="fas fa-save"></i> <span id="inventory-submit-text">Save Inventory</span>
</button>
            </div>
          </form>
        </section>

        <section id="inventory-records" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Inventory</h2>
          <h3 class="text-xl font-medium mb-3 border-b pb-2">Inventory Records</h3>
          <div class="filter-controls flex flex-wrap gap-4 mb-4 items-end">
            <input type="date" id="search-inventory-date" placeholder="Filter by date" class="p-2 border border-gray-300 rounded-md">
            <button onclick="fetchInventory()" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg">
              <i class="fas fa-search"></i> <span>Search</span>
            </button>
          </div>
          <div class="table-responsive" id="table-responsive">
            <button class="export-button bg-purple-500 hover:bg-purple-600 text-white text-sm font-semibold py-2 px-4 rounded-lg mb-3" onclick="exportTableToExcel('inventory-table', 'Inventory_Report_SheetJS')">Export to Excel</button>
            <table id="inventory-table" class="min-w-full divide-y divide-gray-200 border border-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Opening</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Purchases</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sales</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Spoilage</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Closing</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200"></tbody>
            </table>
          </div>
        </section>

        <!-- SALES -->
        <section id="sales-new" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Sales</h2>
                    <h3 class="text-xl font-medium mb-3 border-b pb-2">Record New Sale</h3>

          <form id="sale-form" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 p-4 border rounded-lg bg-gray-50">
            <input type="hidden" id="sale-id">
            <div>
              <label for="sale-item" class="block text-sm font-medium text-gray-700">Item:</label>
              <input type="text" id="sale-item" list="item-suggestions" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
              <datalist id="item-suggestions"></datalist>
            </div>
            <div>
              <label for="sale-number" class="block text-sm font-medium text-gray-700">Number Sold:</label>
              <input type="number" id="sale-number" min="1" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
            </div>
            <div>
              <label for="sale-bp" class="block text-sm font-medium text-gray-700">Buying Price (BP):</label>
              <input type="number" id="sale-bp" step="0.01" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
            </div>
            <div>
              <label for="sale-sp" class="block text-sm font-medium text-gray-700">Selling Price (SP):</label>
              <input type="number" id="sale-sp" step="0.01" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
            </div>
            <div class="md:col-span-2 flex justify-end pt-4">
              <button type="submit" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-lg">
                <i class="fas fa-plus-circle"></i> Record Sale
              </button>
            </div>
          </form>
        </section>

        <section id="sales-records" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Sales </h2>
                    <h3 class="text-xl font-medium mb-3 border-b pb-2">Sales Records</h3>

          <div class="filter-controls flex flex-wrap gap-4 mb-4 items-end">
            <label for="sales-date-filter" class="text-sm font-medium text-gray-700">Filter by Date:</label>
            <input type="date" id="sales-date-filter" class="p-2 border border-gray-300 rounded-md">
<button id="sales-search-button" onclick="fetchSales()" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg">
    <i class="fas fa-search"></i> 
    <span id="search-button-text">Search</span>
</button>          </div>
          <div class="table-responsive">
            <button class="export-button bg-purple-500 hover:bg-purple-600 text-white text-sm font-semibold py-2 px-4 rounded-lg mb-3" onclick="exportTableToExcel('sales-table', 'Sales_Report_SheetJS')">Export to Excel</button>
            <table id="sales-table" class="min-w-full divide-y divide-gray-200 border border-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Item</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Number</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">BP (UGX)</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">SP (UGX)</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total SP (UGX)</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Profit (UGX)</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">%Profit</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200"></tbody>
            </table>
            <div id="sales-summary" class="mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200 font-semibold text-gray-700"></div>
          </div>
        </section>

        <!-- EXPENSES -->
        <section id="expenses-add" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
    <h2 class="text-2xl font-bold mb-4 text-emerald-600">Expenses </h2>
                    <h3 class="text-xl font-medium mb-3 border-b pb-2">Record New Expense</h3>

    <form id="expense-form" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 p-4 border rounded-lg bg-gray-50">
        <input type="hidden" id="expense-id">
        <div>
            <label for="expense-description" class="block text-sm font-medium text-gray-700">Description:</label>
            <input type="text" id="expense-description" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div>
            <label for="expense-amount" class="block text-sm font-medium text-gray-700">Amount:</label>
            <input type="number" id="expense-amount" step="0.01" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div>
            <label for="expense-date" class="block text-sm font-medium text-gray-700">Date</label>
            <input type="date" id="expense-date" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div>
            <label for="expense-receiptId" class="block text-sm font-medium text-gray-700">Receipt ID:</label>
            <input type="number" id="expense-receiptId" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div>
            <label for="expense-source" class="block text-sm font-medium text-gray-700">Source:</label>
            <input type="text" id="expense-source" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div class="md:col-span-2 flex justify-end pt-4">
            <button type="submit" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-lg">
                <i class="fas fa-plus-circle"></i> <span id="expense-submit-text">Record Expense</span>
            </button>
        </div>
    </form>
</section>

        <section id="expenses-records" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Expenses</h2>
                    <h3 class="text-xl font-medium mb-3 border-b pb-2">Expense Records</h3>

          <div class="filter-controls flex flex-wrap gap-4 mb-4 items-end">
            <label for="expenses-date-filter" class="text-sm font-medium text-gray-700">Filter by Date:</label>
            <input type="date" id="expenses-date-filter" class="p-2 border border-gray-300 rounded-md">
<button id="expenses-search-button" onclick="fetchExpenses()" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg">
            <i class="fas fa-search"></i> 
            <span id="expenses-search-button-text">Search</span>
        </button>          </div>
          <div class="table-responsive">
            <table id="expenses-table" class="min-w-full divide-y divide-gray-200 border border-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Receipt ID</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Source</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200"></tbody>
            </table>
          </div>
        </section>

        <!-- CASH -->
        <section id="cash-record" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
    <h2 class="text-2xl font-bold mb-4 text-emerald-600">Cash </h2>
                    <h3 class="text-xl font-medium mb-3 border-b pb-2">Record Cash</h3>

    <form id="cash-journal-form" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 p-4 border rounded-lg bg-gray-50">
        <input type="hidden" id="cash-journal-id">
        <div>
            <label for="cash-at-hand" class="block text-sm font-medium text-gray-700">Cash At Hand:</label>
            <input type="number" id="cash-at-hand" step="0.01" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div>
            <label for="cash-banked" class="block text-sm font-medium text-gray-700">Cash Banked:</label>
            <input type="number" id="cash-banked" step="0.01" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div>
            <label for="bank-receipt-id" class="block text-sm font-medium text-gray-700">Bank Receipt ID:</label>
            <input type="text" id="bank-receipt-id" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div>
            <label for="cash-date" class="block text-sm font-medium text-gray-700">Date:</label>
            <input type="date" id="cash-date" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
        </div>
        <div class="md:col-span-2 flex justify-end pt-4">
            <button type="submit" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-lg">
                <i class="fas fa-money-check-alt"></i> <span id="cash-submit-text">Save Cash Entry</span>
            </button>
        </div>
    </form>
</section>
       <section id="cash-records" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
    <h2 class="text-2xl font-bold mb-4 text-emerald-600">Cash </h2>
                   <h3 class="text-xl font-medium mb-3 border-b pb-2">Cash Records</h3>

    <div class="filter-controls flex flex-wrap gap-4 mb-4 items-end">
        <label for="cash-filter-date" class="text-sm font-medium text-gray-700">Filter by Date:</label>
        <input type="date" id="cash-filter-date" class="p-2 border border-gray-300 rounded-md">
        
        <button id="cash-search-button" onclick="fetchCashJournal()" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg">
            <i class="fas fa-search"></i> 
            <span id="cash-search-button-text">Search</span>
        </button>
        
    </div>
    <div class="table-responsive">
        <table id="cash-journal-table" class="min-w-full divide-y divide-gray-200 border border-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cash At Hand</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cash Banked</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bank Receipt ID</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200"></tbody>
        </table>
    </div>
</section>
        <!-- REPORTS -->
        <section id="reports-department" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Reports </h2>
                    <h3 class="text-xl font-medium mb-3 border-b pb-2">Department Totals</h3>

          <div class="filter-controls flex flex-wrap gap-4 mb-8 items-end p-4 border rounded-lg bg-gray-50">
            <label for="report-start-date" class="text-sm font-medium text-gray-700">Start Date:</label>
            <input type="date" id="report-start-date" class="p-2 border border-gray-300 rounded-md">
            <label for="report-end-date" class="text-sm font-medium text-gray-700">End Date:</label>
            <input type="date" id="report-end-date" class="p-2 border border-gray-300 rounded-md">
<button id="generate-report-btn" onclick="generateReports()" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-lg"><i class="fas fa-chart-pie"></i> Generate Reports</button>          </div>

          <div class="table-responsive mb-8">
            <button class="export-button bg-purple-500 hover:bg-purple-600 text-white text-sm font-semibold py-2 px-4 rounded-lg mb-3" onclick="exportTableToExcel('department-table', 'Department_Report')">Export Department Report</button>
            <table id="department-table" class="min-w-full divide-y divide-gray-200 border border-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Department</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sales</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Expenses</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Balance</th>
                </tr>
              </thead>
              <tbody id="department-report-tbody" class="bg-white divide-y divide-gray-200"></tbody>
            </table>
          </div>
        </section>

        <section id="reports-overall" class="section bg-white p-6 rounded-xl shadow-lg mb-6">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Reports </h2>
                    <h3 class="text-xl font-medium mb-3 border-b pb-2">Overall Summary</h3>

          <div class="table-responsive">
            <button class="export-button bg-purple-500 hover:bg-purple-600 text-white text-sm font-semibold py-2 px-4 rounded-lg mb-3" onclick="exportTableToExcel('overall-reports-table', 'Overall_Summary_Report')">Export Overall Summary</button>
            <table id="overall-reports-table" class="min-w-full divide-y divide-gray-200 border border-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Sales</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Expenses</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Net Balance</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr class="bg-green-50 font-bold">
                  <td id="overall-sales" class="px-6 py-3">0</td>
                  <td id="overall-expenses" class="px-6 py-3">0</td>
                  <td id="overall-balance" class="px-6 py-3">0</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- AUDIT LOGS (unchanged single item) -->
        <section id="audit-logs" class="section-content bg-white p-6 rounded-xl shadow-lg mb-6 hidden">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Audit Logs</h2>
          <div class="search-container mb-4">
            <input type="text" id="audit-search-input" placeholder="Search audit logs..." class="p-2 border border-gray-300 rounded-md w-full max-w-sm">
          </div>
          <div class="table-responsive">
            <table id="audit-logs-table" class="min-w-full divide-y divide-gray-200 border border-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Timestamp</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Details</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200"></tbody>
            </table>
          </div>
        </section>

                <section id="ai" class="section-content bg-white p-6 rounded-xl shadow-lg mb-6 hidden">
          <h2 class="text-2xl font-bold mb-4 text-emerald-600">Audit Logs</h2>
          
        </section>

        

        <section id="dashboard" class="section-content bg-white p-6 rounded-xl shadow-lg mb-6 hidden">
    <h2 class="text-2xl font-bold mb-4 text-emerald-600">Dashboard</h2>

    <div id="dashboard-content">
        

        <div class="bg-gray-800 p-4 rounded-xl shadow-lg mb-8 flex flex-col md:flex-row gap-4 items-center justify-between">
            <h2 class="text-lg font-semibold text-white">Financial Report Period: <span id="period-display" class="text-indigo-400">Last 7 Days</span></h2>
            <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto">
                <input type="date" id="start-date" class="p-2 bg-gray-700 border border-gray-600 rounded-lg text-sm text-gray-300 focus:ring-indigo-500 focus:border-indigo-500">
                <input type="date" id="end-date" class="p-2 bg-gray-700 border border-gray-600 rounded-lg text-sm text-gray-300 focus:ring-indigo-500 focus:border-indigo-500">
                <button id="apply-filter-button" class="bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold py-2 px-4 rounded-lg transition duration-200">Search</button>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="kpi-card bg-gray-800 p-6 rounded-xl shadow-xl border-t-4 border-indigo-500">
                <p class="text-sm text-indigo-400 font-semibold">Total Revenue</p>
                <h3 id="kpi-revenue" class="text-3xl font-bold mt-2 text-white">$0.00</h3>
            </div>
            <div class="kpi-card bg-gray-800 p-6 rounded-xl shadow-xl border-t-4 border-green-500">
                <p class="text-sm text-green-400 font-semibold">Gross Profit</p>
                <h3 id="kpi-profit" class="text-3xl font-bold mt-2 text-white">$0.00</h3>
            </div>
            <div class="kpi-card bg-gray-800 p-6 rounded-xl shadow-xl border-t-4 border-red-500">
                <p class="text-sm text-red-400 font-semibold">Total Expenses</p>
                <h3 id="kpi-expenses" class="text-3xl font-bold mt-2 text-white">$0.00</h3>
            </div>
            <div class="kpi-card bg-gray-800 p-6 rounded-xl shadow-xl border-t-4 border-yellow-500">
                <p class="text-sm text-yellow-400 font-semibold">Low Stock Items</p>
                <h3 id="kpi-low-stock" class="text-3xl font-bold mt-2 text-white">0</h3>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

            <div class="lg:col-span-2 bg-gray-800 p-6 rounded-xl shadow-xl">
                <h2 class="text-xl font-semibold mb-4 text-indigo-400">Financial Trend: Revenue, Expenses, and Gross Profit</h2>
                <div class="chart-container">
                    <canvas id="financialChart"></canvas>
                </div>
                <div id="chart-loading-status" class="text-sm text-gray-500 text-center mt-4">Loading financial data...</div>
            </div>

            <div class="lg:col-span-1 bg-gray-800 p-6 rounded-xl shadow-xl h-full flex flex-col">
                <h2 class="text-xl font-semibold mb-4 text-yellow-400">Inventory Alerts (<span id="low-stock-count">0</span>)</h2>
                <div class="overflow-y-auto flex-grow max-h-[400px]">
                    <table class="min-w-full divide-y divide-gray-700">
                        <thead class="sticky top-0 bg-gray-700">
                            <tr>
                                <th class="py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider rounded-tl-lg">Item</th>
                                <th class="py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Stock</th>
                            </tr>
                        </thead>
                        <tbody id="low-stock-list" class="divide-y divide-gray-800">
                            <tr><td colspan="2" class="text-center py-4 text-gray-500">No low stock items found.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="message-modal" class="fixed inset-0 bg-black bg-opacity-75 hidden items-center justify-center p-4 z-50">
            <div class="bg-gray-800 p-6 rounded-xl shadow-2xl max-w-sm w-full">
                <h3 id="modal-title" class="text-lg font-bold text-red-400 mb-3">Error</h3>
                <p id="modal-content" class="text-gray-300 text-sm mb-4"></p>
                <button onclick="document.getElementById('message-modal').classList.add('hidden');document.getElementById('message-modal').classList.remove('flex');" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 rounded-lg">Close</button>
            </div>
        </div>
    </div>
</section>

      </main>
    </div>
  </div>

  <!-- Edit inventory modal (unchanged) -->
  <div id="edit-inventory-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white w-full max-w-2xl rounded-xl shadow-2xl p-6 relative">
    <h2 class="text-xl font-bold text-emerald-600 mb-6">Edit Inventory Item</h2>
    
    <form id="edit-inventory-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input type="hidden" id="edit-inventory-id">
      
      <div class="md:col-span-2">
        <label for="edit-item" class="block text-sm font-medium text-gray-700">Item:</label>
        <input type="text" id="edit-item" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      
      <div>
        <label for="edit-opening" class="block text-sm font-medium text-gray-700">Opening Stock:</label>
        <input type="number" id="edit-opening" min="0" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      
      <div>
        <label for="edit-purchases" class="block text-sm font-medium text-gray-700">Purchases:</label>
        <input type="number" id="edit-purchases" min="0" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      
      <div>
        <label for="edit-inventory-sales" class="block text-sm font-medium text-gray-700">Sales (deducted from inventory):</label>
        <input type="number" id="edit-inventory-sales" min="0" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      
      <div>
        <label for="edit-spoilage" class="block text-sm font-medium text-gray-700">Spoilage:</label>
        <input type="number" id="edit-spoilage" min="0" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      
      <div class="md:col-span-2 flex justify-end space-x-3 mt-4">
        <button type="button" onclick="document.getElementById('edit-inventory-modal').classList.add('hidden')" class="bg-gray-400 hover:bg-gray-500 text-white py-2 px-4 rounded-lg">Cancel</button>
<button type="submit" id="edit-inventory-submit-btn"
    class="relative bg-emerald-600 hover:bg-emerald-700 text-white py-2 px-4 rounded-lg flex items-center justify-center min-w-[120px]">
    
    <span id="edit-inventory-btn-default" class="inline-flex items-center gap-2">
        <span>Save Changes</span>
    </span>

    <span id="edit-inventory-btn-loading" class="hidden items-center gap-2"> 
        <span>Saving...</span>
        <div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
    </span>
</button>

      </div>
    </form>
  </div>
</div>


<!-- ================= EDIT FORMS ================= -->

<!-- Edit Inventory Modal -->


<div id="edit-sale-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white w-full max-w-2xl rounded-xl shadow-lg p-6 relative">
    <h2 class="text-xl font-bold text-emerald-600 mb-4">Edit Sale Record</h2>
    <form id="edit-sale-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input type="hidden" id="edit-sale-id">
      <div>
        <label class="block text-sm font-medium text-gray-700">Item:</label>
        <input type="text" id="edit-sale-item" list="item-suggestions" required class="p-2 w-full border border-gray-300 rounded-md">
        <datalist id="item-suggestions"></datalist>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Number Sold:</label>
        <input type="number" id="edit-sale-number" min="1" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Buying Price (BP):</label>
        <input type="number" id="edit-sale-bp" step="0.01" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Selling Price (SP):</label>
        <input type="number" id="edit-sale-sp" step="0.01" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      <div class="md:col-span-2 flex justify-end space-x-3 mt-4">
  <button type="button" onclick="closeModal('edit-sale-modal')" class="bg-gray-400 hover:bg-gray-500 text-white py-2 px-4 rounded-lg">Cancel</button>
  
  <button type="submit" id="edit-sale-submit-btn" class="bg-emerald-600 hover:bg-emerald-700 text-white py-2 px-4 rounded-lg flex items-center justify-center">
    
    <span id="edit-sale-btn-default" class="flex items-center">
      <span>Save Changes</span>
    </span>

    <span id="edit-sale-btn-loading" class="hidden items-center">
      <span class="mr-2">Saving...</span>
      <div id="edit-sale-spinner" class="w-4 h-4 border-2 border-white border-t-transparent border-solid rounded-full animate-spin"></div>
    </span>
  </button>
</div>
    </form>
  </div>
</div>
  
<!-- Edit Expense Modal -->
<div id="edit-expense-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white w-full max-w-2xl rounded-xl shadow-lg p-6 relative">
    <h2 class="text-2xl font-bold mb-4 text-emerald-600">Expenses â€” Edit</h2>
    <form id="edit-expense-form" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <input type="hidden" id="edit-expense-id">
      
      <div>
        <label for="edit-expense-description" class="block text-sm font-medium text-gray-700">Description:</label>
        <input type="text" id="edit-expense-description" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
      </div>
      
      <div>
        <label for="edit-expense-amount" class="block text-sm font-medium text-gray-700">Amount:</label>
        <input type="number" id="edit-expense-amount" step="0.01" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
      </div>
      
      <div>
        <label for="edit-expense-date" class="block text-sm font-medium text-gray-700">Date:</label>
        <input type="date" id="edit-expense-date" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
      </div>
      
      <div>
        <label for="edit-expense-receiptId" class="block text-sm font-medium text-gray-700">Receipt ID:</label>
        <input type="number" id="edit-expense-receiptId" min="0" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
      </div>
      
      <div>
        <label for="edit-expense-source" class="block text-sm font-medium text-gray-700">Source:</label>
        <input type="text" id="edit-expense-source" required class="mt-1 p-2 block w-full border border-gray-300 rounded-md">
      </div>

           <div class="md:col-span-2 flex justify-end space-x-3 pt-4">
  <button type="button" onclick="closeModal('edit-expense-modal')" class="bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg">
    Cancel
  </button>
  <button type="submit" id="edit-expense-submit-btn" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center">
    
    <span id="edit-expense-btn-default" class="flex items-center">
      <i class="fas fa-save mr-2"></i> <span>Save Changes</span>
    </span>

    <span id="edit-expense-btn-loading" class="hidden flex items-center">
      <span class="mr-2">Saving...</span>
      <div id="edit-expense-spinner" class="w-4 h-4 border-2 border-white border-t-transparent border-solid rounded-full animate-spin"></div>
    </span>
  </button>
</div>
      
    </form>
  </div>
</div>
  
<!-- Edit Cash Modal -->
<div id="edit-cash-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white w-full max-w-2xl rounded-xl shadow-lg p-6 relative">
    <h2 class="text-xl font-bold text-emerald-600 mb-4">Edit Cash Record</h2>
    <form id="edit-cash-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input type="hidden" id="edit-cash-id">
      <div>
        <label class="block text-sm font-medium text-gray-700">Cash At Hand:</label>
        <input type="number" id="edit-cash-at-hand" step="0.01" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Cash Banked:</label>
        <input type="number" id="edit-cash-banked" step="0.01" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Bank Receipt ID:</label>
        <input type="text" id="edit-bank-receipt-id" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Date:</label>
        <input type="date" id="edit-cash-date" required class="p-2 w-full border border-gray-300 rounded-md">
      </div>
      <div class="md:col-span-2 flex justify-end space-x-3 mt-4">
  <button type="button" onclick="closeModal('edit-cash-modal')" class="bg-gray-400 hover:bg-gray-500 text-white py-2 px-4 rounded-lg">Cancel</button>
  
  <button type="submit" id="edit-cash-submit-btn" class="bg-emerald-600 hover:bg-emerald-700 text-white py-2 px-4 rounded-lg flex items-center justify-center">
    
    <span id="edit-cash-btn-default" class="flex items-center">
      <span>Save Changes</span>
    </span>

    <span id="edit-cash-btn-loading" class="hidden items-center">
      <span class="mr-2">Saving...</span>
      <div class="w-4 h-4 border-2 border-white border-t-transparent border-solid rounded-full animate-spin"></div>
    </span>
  </button>
</div>
    </form>
  </div>
</div>

  <script src="script12.js" defer></script>

  
 <script src="script4.js"></script>
   <script src="script5.js"></script>

  <!-- keep your script includes (if used) -->
  <script src="script3.js"></script>
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
  

</body>
</html>
